(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,52683,e=>{"use strict";var a=e.i(47167),r=e.i(43476),t=e.i(71645);function s({onClick:e}){return(0,r.jsx)("button",{className:"btn btn--secondary",type:"button",onClick:e,children:"Change background"})}function c({reference:e,text:a}){let t=async()=>{let r=`${e}

${a}`;if(navigator.share)try{await navigator.share({title:e,text:r})}catch{}else try{await navigator.clipboard.writeText(r),alert("Versículo copiado al portapapeles")}catch(e){console.error("Error copying to clipboard:",e)}};return(0,r.jsx)("button",{className:"btn btn--primary",type:"button",onClick:t,children:"Share"})}let n=({backgroundUrl:e,reference:a,text:t,onChangeBackground:n})=>(0,r.jsxs)("section",{className:"verse-card",children:[(0,r.jsx)("div",{className:"verse-card__bg",style:{backgroundImage:`url(${e})`}}),(0,r.jsx)("div",{className:"verse-card__overlay"}),(0,r.jsxs)("div",{className:"verse-card__content",children:[(0,r.jsx)("p",{className:"verse-card__label",children:"Today's Verse"}),(0,r.jsx)("h1",{className:"verse-card__reference",children:a}),(0,r.jsx)("p",{className:"verse-card__text",children:t}),(0,r.jsxs)("div",{className:"verse-card__actions",children:[(0,r.jsx)(s,{onClick:n}),(0,r.jsx)(c,{reference:a,text:t})]})]})]});function l(){let[e,s]=(0,t.useState)(null),[c,l]=(0,t.useState)("/default-bg.jpg"),[o,i]=(0,t.useState)(!0),d=async()=>{try{i(!0);let[e,r]=await Promise.all([fetch(`${a.default.env.NEXT_PUBLIC_API_URL}/api/verse/daily?language=es`),fetch(`${a.default.env.NEXT_PUBLIC_API_URL}/api/image/random`)]),t=await e.json(),c=await r.json();s(t.verse),l(c.imageUrl??"/default-bg.jpg")}catch(e){console.error("Error fetching data:",e),l("/default-bg.jpg")}finally{i(!1)}},g=async()=>{try{console.log("Change background clicked");let e=await fetch(`${a.default.env.NEXT_PUBLIC_API_URL}/api/image/random`,{cache:"no-store"});if(!e.ok){console.error("Error HTTP cambiando background:",e.status),l("/default-bg.jpg");return}let r=await e.json();console.log("Nueva imagen:",r),l(r.imageUrl??"/default-bg.jpg")}catch(e){console.error("Error changing background:",e),l("/default-bg.jpg")}window.location.reload()};return(0,t.useEffect)(()=>{d()},[]),(0,r.jsx)("main",{className:"screen",children:(0,r.jsx)("div",{className:"screen__inner",children:o||!e?(0,r.jsx)("div",{className:"screen__loader",children:"Loading verse…"}):(0,r.jsx)(n,{backgroundUrl:c,reference:e.reference,text:e.text,onChangeBackground:g})})})}e.s(["default",()=>l],52683)}]);