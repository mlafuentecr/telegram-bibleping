(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,50912,e=>{"use strict";var a=e.i(48277),r=e.i(30668);function t({onClick:e}){return(0,a.jsx)("button",{className:"btn btn--secondary",type:"button",onClick:e,children:"Change background"})}function s({reference:e,text:r}){let t=async()=>{let a=`${e}

${r}`;if(navigator.share)try{await navigator.share({title:e,text:a})}catch{}else try{await navigator.clipboard.writeText(a),alert("Versículo copiado al portapapeles")}catch(e){console.error("Error copying to clipboard:",e)}};return(0,a.jsx)("button",{className:"btn btn--primary",type:"button",onClick:t,children:"Share"})}let c=({backgroundUrl:e,reference:r,text:c,onChangeBackground:n})=>(0,a.jsxs)("section",{className:"verse-card",children:[(0,a.jsx)("div",{className:"verse-card__bg",style:{backgroundImage:`url(${e})`}}),(0,a.jsx)("div",{className:"verse-card__overlay"}),(0,a.jsxs)("div",{className:"verse-card__content",children:[(0,a.jsx)("p",{className:"verse-card__label",children:"Today's Verse"}),(0,a.jsx)("h1",{className:"verse-card__reference",children:r}),(0,a.jsx)("p",{className:"verse-card__text",children:c}),(0,a.jsxs)("div",{className:"verse-card__actions",children:[(0,a.jsx)(t,{onClick:n}),(0,a.jsx)(s,{reference:r,text:c})]})]})]});function n(){let[e,t]=(0,r.useState)(null),[s,n]=(0,r.useState)("/default-bg.jpg"),[l,o]=(0,r.useState)(!0),i=async()=>{try{o(!0);let[e,a]=await Promise.all([fetch("/api/verse?language=en"),fetch("/api/image")]),r=await e.json(),s=await a.json();t(r.verse),n(s.imageUrl??"/default-bg.jpg")}catch(e){console.error("Error fetching data:",e),n("/default-bg.jpg")}finally{o(!1)}},d=async()=>{try{console.log("Change background clicked");let e=await fetch("/api/image",{cache:"no-store"});if(!e.ok){console.error("Error HTTP cambiando background:",e.status),n("/default-bg.jpg");return}let a=await e.json();console.log("Nueva imagen:",a),n(a.imageUrl??"/default-bg.jpg")}catch(e){console.error("Error changing background:",e),n("/default-bg.jpg")}};return(0,r.useEffect)(()=>{i()},[]),(0,a.jsx)("main",{className:"screen",children:(0,a.jsx)("div",{className:"screen__inner",children:l||!e?(0,a.jsx)("div",{className:"screen__loader",children:"Loading verse…"}):(0,a.jsx)(c,{backgroundUrl:s,reference:e.reference,text:e.text,onChangeBackground:d})})})}e.s(["default",()=>n],50912)}]);