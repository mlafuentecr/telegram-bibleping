(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,50912,e=>{"use strict";e.i(39057);var a=e.i(48277),r=e.i(30668);function t({reference:e,text:t,imageUrl:n}){let[c,s]=(0,r.useState)(!1),i=`ðŸ“– ${e}

${t}

ðŸ™ via BiblePing`,l=async()=>{if(navigator.canShare&&navigator.canShare({files:[]}))try{let a=await fetch(n),r=await a.blob(),t=new File([r],"bibleping-verse.png",{type:r.type});await navigator.share({title:e,text:i,files:[t]});return}catch(e){console.warn("Image share failed, falling back:",e)}try{await navigator.clipboard.writeText(`${i}

${window.location.href}`),s(!0),setTimeout(()=>s(!1),2e3)}catch(e){console.error("Clipboard fallback failed:",e)}};return(0,a.jsx)("button",{type:"button",onClick:l,className:"btn btn--primary","aria-label":"Share verse",children:c?"Copied âœ“":"Share"})}function n({reference:e,text:r,backgroundUrl:n,onChangeBackground:c,onChangeVerse:s}){return(0,a.jsx)("section",{className:"verse-card",style:{backgroundImage:`url(${n})`},children:(0,a.jsxs)("div",{className:"verse-card__content",children:[(0,a.jsx)("h2",{className:"verse-card__reference",children:e}),(0,a.jsx)("p",{className:"verse-card__text",children:r}),(0,a.jsxs)("div",{className:"verse-card__actions",children:[(0,a.jsx)("button",{type:"button",onClick:c,"aria-label":"Change background image",children:"Change background"}),s&&(0,a.jsx)("button",{type:"button",onClick:s,"aria-label":"Get a new verse",children:"New verse"}),(0,a.jsx)(t,{reference:e,text:r,imageUrl:n})]})]})})}let c="http://localhost:3001";function s(){let[e,t]=(0,r.useState)(null),[s,i]=(0,r.useState)("/default-bg.jpg"),[l,o]=(0,r.useState)(!0),g=async()=>{try{o(!0);let[e,a]=await Promise.all([fetch(`${c}/api/verse/daily?language=en`,{cache:"no-store"}),fetch(`${c}/api/image`,{cache:"no-store"})]),r=await e.json(),n=await a.json();t(r.verse??r),i(n.imageUrl??"/default-bg.jpg")}catch(e){console.error("Error fetching data:",e),i("/default-bg.jpg")}finally{o(!1)}},d=async()=>{try{o(!0);let e=await fetch(`${c}/api/verse/random?language=en`,{cache:"no-store"});if(!e.ok)return void console.error("Error fetching random verse:",e.status);let a=await e.json();t(a.verse??a)}catch(e){console.error("Error changing verse:",e)}finally{o(!1)}},h=async()=>{try{let e=await fetch("/api/image",{cache:"no-store"});if(!e.ok){console.error("Error fetching background image:",e.status),i("/default-bg.jpg");return}let a=await e.json();i(a.imageUrl??"/default-bg.jpg")}catch(e){console.error("Error changing background:",e),i("/default-bg.jpg")}};return(0,r.useEffect)(()=>{g()},[]),(0,a.jsx)("main",{className:"screen",children:(0,a.jsx)("div",{className:"screen__inner",children:l||!e?(0,a.jsx)("div",{className:"screen__loader",children:"Loading verseâ€¦"}):(0,a.jsx)(n,{backgroundUrl:s,reference:e.reference,text:e.text,onChangeBackground:h,onChangeVerse:d})})})}e.s(["default",()=>s],50912)}]);