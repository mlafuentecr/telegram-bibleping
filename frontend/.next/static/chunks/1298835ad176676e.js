(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,50912,e=>{"use strict";e.i(39057);var a=e.i(48277),r=e.i(30668);function t({reference:e,text:t,imageUrl:n}){let[c,i]=(0,r.useState)(!1),l=`ðŸ“– ${e}

${t}

ðŸ™ via BiblePing`,s=async()=>{if(navigator.canShare&&navigator.canShare({files:[]}))try{let a=await fetch(n),r=await a.blob(),t=new File([r],"bibleping-verse.png",{type:r.type});await navigator.share({title:e,text:l,files:[t]});return}catch(e){console.warn("Image share failed, falling back:",e)}try{await navigator.clipboard.writeText(`${l}

${window.location.href}`),i(!0),setTimeout(()=>i(!1),2e3)}catch(e){console.error("Clipboard fallback failed:",e)}};return(0,a.jsx)("button",{type:"button",onClick:s,className:"btn btn--primary","aria-label":"Share verse",children:c?"Copied âœ“":"Share"})}function n({reference:e,text:r,backgroundUrl:n,onChangeBackground:c,onChangeVerse:i}){return(0,a.jsx)("section",{className:"verse-card",style:{backgroundImage:`url(${n})`},children:(0,a.jsxs)("div",{className:"verse-card__content",children:[(0,a.jsx)("h2",{children:e}),(0,a.jsx)("p",{children:r}),(0,a.jsxs)("div",{className:"verse-card__actions",children:[(0,a.jsx)("button",{onClick:c,children:"Change background"}),i&&(0,a.jsx)("button",{onClick:i,children:"New verse"}),(0,a.jsx)(t,{reference:e,text:r,imageUrl:n})]})]})})}let c="http://localhost:3001";function i(){let[e,t]=(0,r.useState)(null),[i,l]=(0,r.useState)("/default-bg.jpg"),[s,o]=(0,r.useState)(!0),g=async()=>{try{o(!0);let[e,a]=await Promise.all([fetch(`${c}/api/verse/daily?language=en`,{cache:"no-store"}),fetch(`${c}/api/image`,{cache:"no-store"})]),r=await e.json(),n=await a.json();t(r.verse??r),l(n.imageUrl??"/default-bg.jpg")}catch(e){console.error("Error fetching data:",e),l("/default-bg.jpg")}finally{o(!1)}},d=async()=>{try{console.log("Change background clicked");let e=await fetch(`${c}/api/image`,{cache:"no-store"});if(!e.ok){console.error("Error HTTP cambiando background:",e.status),l("/default-bg.jpg");return}let a=await e.json();console.log("Nueva imagen:",a),l(a.imageUrl??"/default-bg.jpg")}catch(e){console.error("Error changing background:",e),l("/default-bg.jpg")}};return(0,r.useEffect)(()=>{g()},[]),(0,a.jsx)("main",{className:"screen",children:(0,a.jsx)("div",{className:"screen__inner",children:s||!e?(0,a.jsx)("div",{className:"screen__loader",children:"Loading verseâ€¦"}):(0,a.jsx)(n,{backgroundUrl:i,reference:e.reference,text:e.text,onChangeBackground:d})})})}e.s(["default",()=>i],50912)}]);